<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A lightweight single-header Vulkan rendering library"><link href=https://zest-docs.example.com/api-reference/immediate/ rel=canonical><link href=../commands/ rel=prev><link href=../math/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Immediate API - Zest Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#immediate-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zest Documentation" class="md-header__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zest Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Immediate API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../examples/ class=md-tabs__link> Examples </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zest Documentation" class="md-nav__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Zest Documentation </label> <div class=md-nav__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/first-application/ class=md-nav__link> <span class=md-ellipsis> First Application </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../concepts/ class="md-nav__link "> <span class=md-ellipsis> Concepts </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/device-and-context/ class=md-nav__link> <span class=md-ellipsis> Device & Context </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/frame-graph.md class=md-nav__link> <span class=md-ellipsis> Frame Graph </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/pipelines/ class=md-nav__link> <span class=md-ellipsis> Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/buffers/ class=md-nav__link> <span class=md-ellipsis> Buffers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/images/ class=md-nav__link> <span class=md-ellipsis> Images </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/layers/ class=md-nav__link> <span class=md-ellipsis> Layers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/bindless/ class=md-nav__link> <span class=md-ellipsis> Bindless Descriptors </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/memory/ class=md-nav__link> <span class=md-ellipsis> Memory Management </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/01-minimal-template/ class=md-nav__link> <span class=md-ellipsis> Minimal Template </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/02-imgui/ class=md-nav__link> <span class=md-ellipsis> Adding ImGui </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/03-instancing/ class=md-nav__link> <span class=md-ellipsis> GPU Instancing </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/04-textures/ class=md-nav__link> <span class=md-ellipsis> Loading Textures </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/05-compute/ class=md-nav__link> <span class=md-ellipsis> Compute Shaders </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/06-multipass/ class=md-nav__link> <span class=md-ellipsis> Multi-Pass Rendering </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/07-shadows/ class=md-nav__link> <span class=md-ellipsis> Shadow Mapping </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> API Reference </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../device/ class=md-nav__link> <span class=md-ellipsis> Device API </span> </a> </li> <li class=md-nav__item> <a href=../context/ class=md-nav__link> <span class=md-ellipsis> Context API </span> </a> </li> <li class=md-nav__item> <a href=../frame-graph/ class=md-nav__link> <span class=md-ellipsis> Frame Graph API </span> </a> </li> <li class=md-nav__item> <a href=../pipeline/ class=md-nav__link> <span class=md-ellipsis> Pipeline API </span> </a> </li> <li class=md-nav__item> <a href=../buffer/ class=md-nav__link> <span class=md-ellipsis> Buffer API </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image API </span> </a> </li> <li class=md-nav__item> <a href=../layer/ class=md-nav__link> <span class=md-ellipsis> Layer API </span> </a> </li> <li class=md-nav__item> <a href=../compute/ class=md-nav__link> <span class=md-ellipsis> Compute API </span> </a> </li> <li class=md-nav__item> <a href=../commands/ class=md-nav__link> <span class=md-ellipsis> Command API </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Immediate API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Immediate API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#command-buffer class=md-nav__link> <span class=md-ellipsis> Command Buffer </span> </a> <nav class=md-nav aria-label="Command Buffer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_begincommandbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_BeginCommandBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_endcommandbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_EndCommandBuffer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffer-operations class=md-nav__link> <span class=md-ellipsis> Buffer Operations </span> </a> <nav class=md-nav aria-label="Buffer Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_copybuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_copybufferregion class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferRegion </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_fillbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_FillBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_updatebuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_UpdateBuffer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#image-operations class=md-nav__link> <span class=md-ellipsis> Image Operations </span> </a> <nav class=md-nav aria-label="Image Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_copybuffertoimage class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferToImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_copybufferregionstoimage class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferRegionsToImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_transitionimage class=md-nav__link> <span class=md-ellipsis> zest_imm_TransitionImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_generatemipmaps class=md-nav__link> <span class=md-ellipsis> zest_imm_GenerateMipMaps </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_clearcolorimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ClearColorImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_cleardepthstencilimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ClearDepthStencilImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_blitimage class=md-nav__link> <span class=md-ellipsis> zest_imm_BlitImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_resolveimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ResolveImage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#compute-operations class=md-nav__link> <span class=md-ellipsis> Compute Operations </span> </a> <nav class=md-nav aria-label="Compute Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_sendpushconstants class=md-nav__link> <span class=md-ellipsis> zest_imm_SendPushConstants </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_bindcomputepipeline class=md-nav__link> <span class=md-ellipsis> zest_imm_BindComputePipeline </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_dispatchcompute class=md-nav__link> <span class=md-ellipsis> zest_imm_DispatchCompute </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../math/ class=md-nav__link> <span class=md-ellipsis> Math API </span> </a> </li> <li class=md-nav__item> <a href=../camera/ class=md-nav__link> <span class=md-ellipsis> Camera API </span> </a> </li> <li class=md-nav__item> <a href=../timer/ class=md-nav__link> <span class=md-ellipsis> Timer API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../examples/ class="md-nav__link "> <span class=md-ellipsis> Examples </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#command-buffer class=md-nav__link> <span class=md-ellipsis> Command Buffer </span> </a> <nav class=md-nav aria-label="Command Buffer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_begincommandbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_BeginCommandBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_endcommandbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_EndCommandBuffer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffer-operations class=md-nav__link> <span class=md-ellipsis> Buffer Operations </span> </a> <nav class=md-nav aria-label="Buffer Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_copybuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_copybufferregion class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferRegion </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_fillbuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_FillBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_updatebuffer class=md-nav__link> <span class=md-ellipsis> zest_imm_UpdateBuffer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#image-operations class=md-nav__link> <span class=md-ellipsis> Image Operations </span> </a> <nav class=md-nav aria-label="Image Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_copybuffertoimage class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferToImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_copybufferregionstoimage class=md-nav__link> <span class=md-ellipsis> zest_imm_CopyBufferRegionsToImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_transitionimage class=md-nav__link> <span class=md-ellipsis> zest_imm_TransitionImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_generatemipmaps class=md-nav__link> <span class=md-ellipsis> zest_imm_GenerateMipMaps </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_clearcolorimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ClearColorImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_cleardepthstencilimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ClearDepthStencilImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_blitimage class=md-nav__link> <span class=md-ellipsis> zest_imm_BlitImage </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_resolveimage class=md-nav__link> <span class=md-ellipsis> zest_imm_ResolveImage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#compute-operations class=md-nav__link> <span class=md-ellipsis> Compute Operations </span> </a> <nav class=md-nav aria-label="Compute Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_imm_sendpushconstants class=md-nav__link> <span class=md-ellipsis> zest_imm_SendPushConstants </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_bindcomputepipeline class=md-nav__link> <span class=md-ellipsis> zest_imm_BindComputePipeline </span> </a> </li> <li class=md-nav__item> <a href=#zest_imm_dispatchcompute class=md-nav__link> <span class=md-ellipsis> zest_imm_DispatchCompute </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=immediate-api>Immediate API<a class=headerlink href=#immediate-api title="Permanent link">&para;</a></h1> <p>One-off GPU commands outside frame graphs (<code>zest_imm_*</code> functions). Use these for initialization, resource uploads, and other operations that don't fit within the frame graph model.</p> <h2 id=command-buffer>Command Buffer<a class=headerlink href=#command-buffer title="Permanent link">&para;</a></h2> <h3 id=zest_imm_begincommandbuffer>zest_imm_BeginCommandBuffer<a class=headerlink href=#zest_imm_begincommandbuffer title="Permanent link">&para;</a></h3> <p>Begin immediate command recording. Acquires a command buffer from the specified queue for one-time submission.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>zest_queue</span><span class=w> </span><span class=nf>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_device_queue_type</span><span class=w> </span><span class=n>target_queue</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>device</code> - The Zest device handle - <code>target_queue</code> - Queue type: <code>zest_queue_graphics</code>, <code>zest_queue_transfer</code>, or <code>zest_queue_compute</code></p> <p><strong>Returns:</strong> A queue handle to use with subsequent immediate commands.</p> <p><strong>Usage:</strong> Call this at the start of any immediate command sequence. Choose the appropriate queue type for your operation - transfer for copies, compute for compute dispatches, graphics for operations requiring graphics capabilities.</p> <hr> <h3 id=zest_imm_endcommandbuffer>zest_imm_EndCommandBuffer<a class=headerlink href=#zest_imm_endcommandbuffer title="Permanent link">&para;</a></h3> <p>Submit the command buffer and wait for completion (blocking). The queue is released immediately after.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - The queue handle from <code>zest_imm_BeginCommandBuffer</code></p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Usage:</strong> Always call this to finalize and execute immediate commands. This is a blocking call that waits for GPU completion before returning.</p> <hr> <h2 id=buffer-operations>Buffer Operations<a class=headerlink href=#buffer-operations title="Permanent link">&para;</a></h2> <h3 id=zest_imm_copybuffer>zest_imm_CopyBuffer<a class=headerlink href=#zest_imm_copybuffer title="Permanent link">&para;</a></h3> <p>Copy data from one buffer to another. Typically used to upload data from a staging buffer to GPU-local memory.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_CopyBuffer</span><span class=p>(</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>src_buffer</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>dst_buffer</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>size</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>src_buffer</code> - Source buffer (typically staging buffer) - <code>dst_buffer</code> - Destination buffer (typically device-local buffer) - <code>size</code> - Number of bytes to copy</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>// Upload vertex data to GPU</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>zest_buffer</span><span class=w> </span><span class=n>staging</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateStagingBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>vertex_size</span><span class=p>,</span><span class=w> </span><span class=n>vertex_data</span><span class=p>);</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=n>zest_buffer</span><span class=w> </span><span class=n>gpu_buffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateDeviceBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>vertex_size</span><span class=p>,</span><span class=w> </span><span class=n>zest_buffer_usage_vertex</span><span class=p>);</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=n>zest_imm_CopyBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>staging</span><span class=p>,</span><span class=w> </span><span class=n>gpu_buffer</span><span class=p>,</span><span class=w> </span><span class=n>vertex_size</span><span class=p>);</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=n>zest_FreeBuffer</span><span class=p>(</span><span class=n>staging</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_copybufferregion>zest_imm_CopyBufferRegion<a class=headerlink href=#zest_imm_copybufferregion title="Permanent link">&para;</a></h3> <p>Copy a region from one buffer to another with specific offsets. Useful for partial updates or appending data.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_CopyBufferRegion</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>src_buffer</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>src_offset</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>dst_buffer</span><span class=p>,</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>dst_offset</span><span class=p>,</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>size</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>src_buffer</code> - Source buffer - <code>src_offset</code> - Byte offset in source buffer - <code>dst_buffer</code> - Destination buffer - <code>dst_offset</code> - Byte offset in destination buffer - <code>size</code> - Number of bytes to copy</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>// Append mesh data to an existing buffer</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=n>zest_imm_CopyBufferRegion</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>staging</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>vertex_buffer</span><span class=p>,</span><span class=w> </span><span class=n>existing_size</span><span class=p>,</span><span class=w> </span><span class=n>new_data_size</span><span class=p>);</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_fillbuffer>zest_imm_FillBuffer<a class=headerlink href=#zest_imm_fillbuffer title="Permanent link">&para;</a></h3> <p>Fill an entire buffer with a 32-bit value. Commonly used to zero-initialize buffers or set default values.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_imm_FillBuffer</span><span class=p>(</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>buffer</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>value</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>buffer</code> - Buffer to fill - <code>value</code> - 32-bit value to fill with (repeated throughout buffer)</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>// Zero-initialize a compute buffer</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=n>zest_imm_FillBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>counter_buffer</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_updatebuffer>zest_imm_UpdateBuffer<a class=headerlink href=#zest_imm_updatebuffer title="Permanent link">&para;</a></h3> <p>Update a buffer with data directly from CPU memory. Limited to 64KB maximum. For larger updates, use staging buffers with <code>zest_imm_CopyBuffer</code>.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_imm_UpdateBuffer</span><span class=p>(</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>buffer</span><span class=p>,</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>intended_size</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>buffer</code> - Destination buffer - <code>data</code> - Pointer to source data - <code>intended_size</code> - Size in bytes (max 64KB)</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>// Quick update of uniform data</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=n>zest_imm_UpdateBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>uniform_buffer</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>uniforms</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>uniforms</span><span class=p>));</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h2 id=image-operations>Image Operations<a class=headerlink href=#image-operations title="Permanent link">&para;</a></h2> <h3 id=zest_imm_copybuffertoimage>zest_imm_CopyBufferToImage<a class=headerlink href=#zest_imm_copybuffertoimage title="Permanent link">&para;</a></h3> <p>Copy pixel data from a buffer to an image. Used for texture uploads from staging buffers.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_CopyBufferToImage</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>src_buffer</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>dst_image</span><span class=p>,</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>size</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>src_buffer</code> - Source buffer containing pixel data - <code>dst_image</code> - Destination image - <code>size</code> - Size in bytes to copy</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>// Upload texture from staging buffer</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=n>zest_buffer</span><span class=w> </span><span class=n>staging</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateStagingBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>pixel_size</span><span class=p>,</span><span class=w> </span><span class=n>pixels</span><span class=p>);</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_transfer_dst_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=n>zest_imm_CopyBufferToImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>staging</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>pixel_size</span><span class=p>);</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_shader_read_only_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=n>zest_FreeBuffer</span><span class=p>(</span><span class=n>staging</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_copybufferregionstoimage>zest_imm_CopyBufferRegionsToImage<a class=headerlink href=#zest_imm_copybufferregionstoimage title="Permanent link">&para;</a></h3> <p>Copy multiple regions from a buffer to an image. Useful for uploading texture arrays, cube maps, or mip levels from a single buffer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_CopyBufferRegionsToImage</span><span class=p>(</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=n>zest_buffer_image_copy_t</span><span class=w> </span><span class=o>*</span><span class=n>regions</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>regions_count</span><span class=p>,</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>buffer</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>image</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>regions</code> - Array of copy region descriptors - <code>regions_count</code> - Number of regions - <code>buffer</code> - Source buffer - <code>image</code> - Destination image</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1>// Upload 6 faces of a cube map</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=n>zest_buffer_image_copy_t</span><span class=w> </span><span class=n>regions</span><span class=p>[</span><span class=mi>6</span><span class=p>];</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=c1>// ... configure regions for each face ...</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>cube_map</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_transfer_dst_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>);</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=n>zest_imm_CopyBufferRegionsToImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>regions</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=n>staging</span><span class=p>,</span><span class=w> </span><span class=n>cube_map</span><span class=p>);</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>cube_map</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_shader_read_only_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>);</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_transitionimage>zest_imm_TransitionImage<a class=headerlink href=#zest_imm_transitionimage title="Permanent link">&para;</a></h3> <p>Transition an image to a new layout with full control over mip levels and array layers. Required before and after many image operations. Failure to transition images correctly will result in validation errors and undefined behaviour.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_TransitionImage</span><span class=p>(</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>image</span><span class=p>,</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=n>zest_image_layout</span><span class=w> </span><span class=n>new_layout</span><span class=p>,</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>base_mip_index</span><span class=p>,</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>mip_levels</span><span class=p>,</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>base_array_index</span><span class=p>,</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>layer_count</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>image</code> - Image to transition - <code>new_layout</code> - Target layout (e.g., <code>zest_image_layout_shader_read_only_optimal</code>) - <code>base_mip_index</code> - First mip level to transition - <code>mip_levels</code> - Number of mip levels (use <code>ZEST__ALL_MIPS</code> for all) - <code>base_array_index</code> - First array layer to transition - <code>layer_count</code> - Number of layers (use <code>ZEST__ALL_LAYERS</code> for all)</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Common layouts:</strong> - <code>zest_image_layout_undefined</code> - Initial/don't care - <code>zest_image_layout_transfer_dst_optimal</code> - Destination for copies - <code>zest_image_layout_transfer_src_optimal</code> - Source for copies - <code>zest_image_layout_shader_read_only_optimal</code> - Sampling in shaders - <code>zest_image_layout_general</code> - Storage images - <code>zest_image_layout_color_attachment_optimal</code> - Render target</p> <hr> <h3 id=zest_imm_generatemipmaps>zest_imm_GenerateMipMaps<a class=headerlink href=#zest_imm_generatemipmaps title="Permanent link">&para;</a></h3> <p>Generate mip maps for an image using hardware filtering. The image must have been created with multiple mip levels.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_GenerateMipMaps</span><span class=p>(</span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>zest_image</span><span class=w> </span><span class=n>image</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle (must be graphics queue for blit operations) - <code>image</code> - Image to generate mips for</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>// Generate mips after uploading base level</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=n>zest_imm_GenerateMipMaps</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>);</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_clearcolorimage>zest_imm_ClearColorImage<a class=headerlink href=#zest_imm_clearcolorimage title="Permanent link">&para;</a></h3> <p>Clear a color image to a specified value.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_ClearColorImage</span><span class=p>(</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>image</span><span class=p>,</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>    </span><span class=n>zest_clear_value_t</span><span class=w> </span><span class=n>clear_value</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>image</code> - Color image to clear - <code>clear_value</code> - Clear color (use <code>.color</code> field of the union)</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>zest_clear_value_t</span><span class=w> </span><span class=n>clear</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>.</span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>image</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_transfer_dst_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=n>zest_imm_ClearColorImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>image</span><span class=p>,</span><span class=w> </span><span class=n>clear</span><span class=p>);</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>image</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_shader_read_only_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_cleardepthstencilimage>zest_imm_ClearDepthStencilImage<a class=headerlink href=#zest_imm_cleardepthstencilimage title="Permanent link">&para;</a></h3> <p>Clear a depth/stencil image to specified depth and stencil values.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_ClearDepthStencilImage</span><span class=p>(</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>image</span><span class=p>,</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>depth</span><span class=p>,</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>stencil</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>image</code> - Depth/stencil image to clear - <code>depth</code> - Depth clear value (typically 1.0 for far plane) - <code>stencil</code> - Stencil clear value (typically 0)</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=n>zest_imm_ClearDepthStencilImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>depth_buffer</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_blitimage>zest_imm_BlitImage<a class=headerlink href=#zest_imm_blitimage title="Permanent link">&para;</a></h3> <p>Blit (scaled copy) from one image to another with filtering. Useful for resizing images, format conversion, or copying between images of different dimensions.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_BlitImage</span><span class=p>(</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>src_image</span><span class=p>,</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>dst_image</span><span class=p>,</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>src_x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>src_y</span><span class=p>,</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>src_width</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>src_height</span><span class=p>,</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>dst_x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>dst_y</span><span class=p>,</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>dst_width</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>dst_height</span><span class=p>,</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span><span class=n>zest_filter_type</span><span class=w> </span><span class=n>filter</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle (must be graphics queue) - <code>src_image</code> - Source image - <code>dst_image</code> - Destination image - <code>src_x</code>, <code>src_y</code> - Top-left corner of source region - <code>src_width</code>, <code>src_height</code> - Source region dimensions - <code>dst_x</code>, <code>dst_y</code> - Top-left corner of destination region - <code>dst_width</code>, <code>dst_height</code> - Destination region dimensions - <code>filter</code> - <code>zest_filter_nearest</code> or <code>zest_filter_linear</code></p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1>// Downscale an image by half</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=n>zest_imm_BlitImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>src</span><span class=p>,</span><span class=w> </span><span class=n>dst</span><span class=p>,</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1024</span><span class=p>,</span><span class=w> </span><span class=mi>1024</span><span class=p>,</span><span class=w>  </span><span class=c1>// source region</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>512</span><span class=p>,</span><span class=w> </span><span class=mi>512</span><span class=p>,</span><span class=w>    </span><span class=c1>// destination region (half size)</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=n>zest_filter_linear</span><span class=p>);</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_imm_resolveimage>zest_imm_ResolveImage<a class=headerlink href=#zest_imm_resolveimage title="Permanent link">&para;</a></h3> <p>Resolve a multisampled image to a single-sampled image. Used to convert MSAA render targets to regular textures for further processing or display.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_ResolveImage</span><span class=p>(</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>src_image</span><span class=p>,</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>    </span><span class=n>zest_image</span><span class=w> </span><span class=n>dst_image</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>src_image</code> - Multisampled source image - <code>dst_image</code> - Single-sampled destination image (must match dimensions)</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <hr> <h2 id=compute-operations>Compute Operations<a class=headerlink href=#compute-operations title="Permanent link">&para;</a></h2> <h3 id=zest_imm_sendpushconstants>zest_imm_SendPushConstants<a class=headerlink href=#zest_imm_sendpushconstants title="Permanent link">&para;</a></h3> <p>Send push constant data to shaders. Must be called inside an immediate command buffer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_imm_SendPushConstants</span><span class=p>(</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>,</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>size</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>data</code> - Pointer to push constant data - <code>size</code> - Size in bytes</p> <hr> <h3 id=zest_imm_bindcomputepipeline>zest_imm_BindComputePipeline<a class=headerlink href=#zest_imm_bindcomputepipeline title="Permanent link">&para;</a></h3> <p>Bind a compute pipeline for subsequent dispatch calls.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_imm_BindComputePipeline</span><span class=p>(</span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>zest_compute</span><span class=w> </span><span class=n>compute</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>compute</code> - Compute pipeline handle</p> <hr> <h3 id=zest_imm_dispatchcompute>zest_imm_DispatchCompute<a class=headerlink href=#zest_imm_dispatchcompute title="Permanent link">&para;</a></h3> <p>Dispatch a compute workload. Must call <code>zest_imm_BindComputePipeline</code> first.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_imm_DispatchCompute</span><span class=p>(</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=p>,</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>group_count_x</span><span class=p>,</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>group_count_y</span><span class=p>,</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>group_count_z</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>queue</code> - Queue handle from <code>zest_imm_BeginCommandBuffer</code> - <code>group_count_x/y/z</code> - Number of work groups in each dimension</p> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> on success.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1>// Run a compute shader outside frame graph</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_compute</span><span class=p>);</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=n>zest_imm_BindComputePipeline</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>blur_compute</span><span class=p>);</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=n>zest_imm_SendPushConstants</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>params</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>params</span><span class=p>));</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=n>zest_imm_DispatchCompute</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=n>width</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>15</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=n>height</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>15</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h2 id=complete-example>Complete Example<a class=headerlink href=#complete-example title="Permanent link">&para;</a></h2> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1>// Full texture upload workflow</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=kt>void</span><span class=w> </span><span class=nf>upload_texture</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_image</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>pixels</span><span class=p>,</span><span class=w> </span><span class=n>zest_size</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class=c1>// Create staging buffer with pixel data</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>    </span><span class=n>zest_buffer</span><span class=w> </span><span class=n>staging</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateStagingBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>pixels</span><span class=p>);</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>    </span><span class=c1>// Upload to GPU</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>    </span><span class=n>zest_queue</span><span class=w> </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_transfer</span><span class=p>);</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>    </span><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_transfer_dst_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>    </span><span class=n>zest_imm_CopyBufferToImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>staging</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>    </span><span class=n>zest_imm_TransitionImage</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>,</span><span class=w> </span><span class=n>zest_image_layout_transfer_src_optimal</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>    </span><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=w>    </span><span class=c1>// Generate mipmaps (requires graphics queue for blit)</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a><span class=w>    </span><span class=n>queue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_imm_BeginCommandBuffer</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zest_queue_graphics</span><span class=p>);</span>
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a><span class=w>    </span><span class=n>zest_imm_GenerateMipMaps</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span><span class=w> </span><span class=n>texture</span><span class=p>);</span>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a><span class=w>    </span><span class=n>zest_imm_EndCommandBuffer</span><span class=p>(</span><span class=n>queue</span><span class=p>);</span>
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a><span class=w>    </span><span class=c1>// Clean up staging buffer</span>
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a><span class=w>    </span><span class=n>zest_FreeBuffer</span><span class=p>(</span><span class=n>staging</span><span class=p>);</span>
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a><span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=see-also>See Also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h2> <ul> <li><a href=../commands/ >Command API</a> - Frame graph commands</li> <li><a href=../../concepts/buffers/ >Buffers Concept</a></li> <li><a href=../image/ >Image API</a> - Image creation and management</li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>