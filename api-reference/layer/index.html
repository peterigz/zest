<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A lightweight single-header Vulkan rendering library"><link href=https://zest-docs.example.com/api-reference/layer/ rel=canonical><link href=../image/ rel=prev><link href=../compute/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Layer API - Zest Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#layer-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zest Documentation" class="md-header__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zest Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Layer API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../examples/ class=md-tabs__link> Examples </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zest Documentation" class="md-nav__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Zest Documentation </label> <div class=md-nav__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/first-application/ class=md-nav__link> <span class=md-ellipsis> First Application </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../concepts/ class="md-nav__link "> <span class=md-ellipsis> Concepts </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/device-and-context/ class=md-nav__link> <span class=md-ellipsis> Device & Context </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/frame-graph.md class=md-nav__link> <span class=md-ellipsis> Frame Graph </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/pipelines/ class=md-nav__link> <span class=md-ellipsis> Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/buffers/ class=md-nav__link> <span class=md-ellipsis> Buffers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/images/ class=md-nav__link> <span class=md-ellipsis> Images </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/layers/ class=md-nav__link> <span class=md-ellipsis> Layers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/bindless/ class=md-nav__link> <span class=md-ellipsis> Bindless Descriptors </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/memory/ class=md-nav__link> <span class=md-ellipsis> Memory Management </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/01-minimal-template/ class=md-nav__link> <span class=md-ellipsis> Minimal Template </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/02-imgui/ class=md-nav__link> <span class=md-ellipsis> Adding ImGui </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/03-instancing/ class=md-nav__link> <span class=md-ellipsis> GPU Instancing </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/04-textures/ class=md-nav__link> <span class=md-ellipsis> Loading Textures </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/05-compute/ class=md-nav__link> <span class=md-ellipsis> Compute Shaders </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/06-multipass/ class=md-nav__link> <span class=md-ellipsis> Multi-Pass Rendering </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/07-shadows/ class=md-nav__link> <span class=md-ellipsis> Shadow Mapping </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> API Reference </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../device/ class=md-nav__link> <span class=md-ellipsis> Device API </span> </a> </li> <li class=md-nav__item> <a href=../context/ class=md-nav__link> <span class=md-ellipsis> Context API </span> </a> </li> <li class=md-nav__item> <a href=../frame-graph/ class=md-nav__link> <span class=md-ellipsis> Frame Graph API </span> </a> </li> <li class=md-nav__item> <a href=../pipeline/ class=md-nav__link> <span class=md-ellipsis> Pipeline API </span> </a> </li> <li class=md-nav__item> <a href=../buffer/ class=md-nav__link> <span class=md-ellipsis> Buffer API </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image API </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Layer API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Layer API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#layer-types class=md-nav__link> <span class=md-ellipsis> Layer Types </span> </a> </li> <li class=md-nav__item> <a href=#layer-creation class=md-nav__link> <span class=md-ellipsis> Layer Creation </span> </a> <nav class=md-nav aria-label="Layer Creation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_createinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_CreateInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createfifinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_CreateFIFInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createmeshlayer class=md-nav__link> <span class=md-ellipsis> zest_CreateMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createinstancemeshlayer class=md-nav__link> <span class=md-ellipsis> zest_CreateInstanceMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayer class=md-nav__link> <span class=md-ellipsis> zest_GetLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_freelayer class=md-nav__link> <span class=md-ellipsis> zest_FreeLayer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instance-recording class=md-nav__link> <span class=md-ellipsis> Instance Recording </span> </a> <nav class=md-nav aria-label="Instance Recording"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_startinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_endinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_EndInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_maybeendinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_MaybeEndInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_nextinstance class=md-nav__link> <span class=md-ellipsis> zest_NextInstance </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancebuffer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstanceinstruction class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceInstruction </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instance-layer-state class=md-nav__link> <span class=md-ellipsis> Instance Layer State </span> </a> <nav class=md-nav aria-label="Instance Layer State"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_startinstancedrawing class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_getinstancelayercount class=md-nav__link> <span class=md-ellipsis> zest_GetInstanceLayerCount </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerinstancesize class=md-nav__link> <span class=md-ellipsis> zest_GetLayerInstanceSize </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mesh-layer-operations class=md-nav__link> <span class=md-ellipsis> Mesh Layer Operations </span> </a> <nav class=md-nav aria-label="Mesh Layer Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_addmeshtolayer class=md-nav__link> <span class=md-ellipsis> zest_AddMeshToLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayermeshoffsets class=md-nav__link> <span class=md-ellipsis> zest_GetLayerMeshOffsets </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayermeshtextureindex class=md-nav__link> <span class=md-ellipsis> zest_GetLayerMeshTextureIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_setmeshdrawing class=md-nav__link> <span class=md-ellipsis> zest_SetMeshDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_startinstancemeshdrawing class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceMeshDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_getvertexwritebuffer-zest_getindexwritebuffer class=md-nav__link> <span class=md-ellipsis> zest_GetVertexWriteBuffer / zest_GetIndexWriteBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_pushindex class=md-nav__link> <span class=md-ellipsis> zest_PushIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_growmeshvertexbuffers-zest_growmeshindexbuffers class=md-nav__link> <span class=md-ellipsis> zest_GrowMeshVertexBuffers / zest_GrowMeshIndexBuffers </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayervertexmemoryinuse-zest_getlayerindexmemoryinuse class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexMemoryInUse / zest_GetLayerIndexMemoryInUse </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#drawing class=md-nav__link> <span class=md-ellipsis> Drawing </span> </a> <nav class=md-nav aria-label=Drawing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_drawinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancemeshlayer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancemeshlayerwithpipeline class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceMeshLayerWithPipeline </span> </a> </li> <li class=md-nav__item> <a href=#zest_uploadlayerstagingdata class=md-nav__link> <span class=md-ellipsis> zest_UploadLayerStagingData </span> </a> </li> <li class=md-nav__item> <a href=#zest_uploadinstancelayerdata class=md-nav__link> <span class=md-ellipsis> zest_UploadInstanceLayerData </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-properties class=md-nav__link> <span class=md-ellipsis> Layer Properties </span> </a> <nav class=md-nav aria-label="Layer Properties"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_setlayerviewport class=md-nav__link> <span class=md-ellipsis> zest_SetLayerViewPort </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerscissor class=md-nav__link> <span class=md-ellipsis> zest_SetLayerScissor </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerdrawingviewport class=md-nav__link> <span class=md-ellipsis> zest_SetLayerDrawingViewport </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayersizetoswapchain class=md-nav__link> <span class=md-ellipsis> zest_SetLayerSizeToSwapchain </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayersize class=md-nav__link> <span class=md-ellipsis> zest_SetLayerSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerscissor-zest_getlayerviewport class=md-nav__link> <span class=md-ellipsis> zest_GetLayerScissor / zest_GetLayerViewport </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayercolor-zest_setlayercolorf class=md-nav__link> <span class=md-ellipsis> zest_SetLayerColor / zest_SetLayerColorf </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerintensity class=md-nav__link> <span class=md-ellipsis> zest_SetLayerIntensity </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerpushconstants-zest_getlayerpushconstants class=md-nav__link> <span class=md-ellipsis> zest_SetLayerPushConstants / zest_GetLayerPushConstants </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayeruserdata-zest_getlayeruserdata class=md-nav__link> <span class=md-ellipsis> zest_SetLayerUserData / zest_GetLayerUserData </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-reset class=md-nav__link> <span class=md-ellipsis> Layer Reset </span> </a> <nav class=md-nav aria-label="Layer Reset"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_resetlayer class=md-nav__link> <span class=md-ellipsis> zest_ResetLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_resetinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_ResetInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_resetinstancelayerdrawing class=md-nav__link> <span class=md-ellipsis> zest_ResetInstanceLayerDrawing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#draw-instructions class=md-nav__link> <span class=md-ellipsis> Draw Instructions </span> </a> <nav class=md-nav aria-label="Draw Instructions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_nextlayerinstruction class=md-nav__link> <span class=md-ellipsis> zest_NextLayerInstruction </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerinstruction-zest_getlayerinstructioncount class=md-nav__link> <span class=md-ellipsis> zest_GetLayerInstruction / zest_GetLayerInstructionCount </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffer-access class=md-nav__link> <span class=md-ellipsis> Buffer Access </span> </a> <nav class=md-nav aria-label="Buffer Access"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_getlayervertexbuffer-zest_getlayerresourcebuffer class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexBuffer / zest_GetLayerResourceBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerstagingvertexbuffer-zest_getlayerstagingindexbuffer class=md-nav__link> <span class=md-ellipsis> zest_GetLayerStagingVertexBuffer / zest_GetLayerStagingIndexBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayervertexdescriptorindex class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexDescriptorIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerframeinflight class=md-nav__link> <span class=md-ellipsis> zest_GetLayerFrameInFlight </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#frame-graph-integration class=md-nav__link> <span class=md-ellipsis> Frame Graph Integration </span> </a> <nav class=md-nav aria-label="Frame Graph Integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_addtransientlayerresource class=md-nav__link> <span class=md-ellipsis> zest_AddTransientLayerResource </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../compute/ class=md-nav__link> <span class=md-ellipsis> Compute API </span> </a> </li> <li class=md-nav__item> <a href=../commands/ class=md-nav__link> <span class=md-ellipsis> Command API </span> </a> </li> <li class=md-nav__item> <a href=../immediate/ class=md-nav__link> <span class=md-ellipsis> Immediate API </span> </a> </li> <li class=md-nav__item> <a href=../math/ class=md-nav__link> <span class=md-ellipsis> Math API </span> </a> </li> <li class=md-nav__item> <a href=../camera/ class=md-nav__link> <span class=md-ellipsis> Camera API </span> </a> </li> <li class=md-nav__item> <a href=../timer/ class=md-nav__link> <span class=md-ellipsis> Timer API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../examples/ class="md-nav__link "> <span class=md-ellipsis> Examples </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#layer-types class=md-nav__link> <span class=md-ellipsis> Layer Types </span> </a> </li> <li class=md-nav__item> <a href=#layer-creation class=md-nav__link> <span class=md-ellipsis> Layer Creation </span> </a> <nav class=md-nav aria-label="Layer Creation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_createinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_CreateInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createfifinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_CreateFIFInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createmeshlayer class=md-nav__link> <span class=md-ellipsis> zest_CreateMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_createinstancemeshlayer class=md-nav__link> <span class=md-ellipsis> zest_CreateInstanceMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayer class=md-nav__link> <span class=md-ellipsis> zest_GetLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_freelayer class=md-nav__link> <span class=md-ellipsis> zest_FreeLayer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instance-recording class=md-nav__link> <span class=md-ellipsis> Instance Recording </span> </a> <nav class=md-nav aria-label="Instance Recording"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_startinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_endinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_EndInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_maybeendinstanceinstructions class=md-nav__link> <span class=md-ellipsis> zest_MaybeEndInstanceInstructions </span> </a> </li> <li class=md-nav__item> <a href=#zest_nextinstance class=md-nav__link> <span class=md-ellipsis> zest_NextInstance </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancebuffer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstanceinstruction class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceInstruction </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instance-layer-state class=md-nav__link> <span class=md-ellipsis> Instance Layer State </span> </a> <nav class=md-nav aria-label="Instance Layer State"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_startinstancedrawing class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_getinstancelayercount class=md-nav__link> <span class=md-ellipsis> zest_GetInstanceLayerCount </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerinstancesize class=md-nav__link> <span class=md-ellipsis> zest_GetLayerInstanceSize </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mesh-layer-operations class=md-nav__link> <span class=md-ellipsis> Mesh Layer Operations </span> </a> <nav class=md-nav aria-label="Mesh Layer Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_addmeshtolayer class=md-nav__link> <span class=md-ellipsis> zest_AddMeshToLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayermeshoffsets class=md-nav__link> <span class=md-ellipsis> zest_GetLayerMeshOffsets </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayermeshtextureindex class=md-nav__link> <span class=md-ellipsis> zest_GetLayerMeshTextureIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_setmeshdrawing class=md-nav__link> <span class=md-ellipsis> zest_SetMeshDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_startinstancemeshdrawing class=md-nav__link> <span class=md-ellipsis> zest_StartInstanceMeshDrawing </span> </a> </li> <li class=md-nav__item> <a href=#zest_getvertexwritebuffer-zest_getindexwritebuffer class=md-nav__link> <span class=md-ellipsis> zest_GetVertexWriteBuffer / zest_GetIndexWriteBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_pushindex class=md-nav__link> <span class=md-ellipsis> zest_PushIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_growmeshvertexbuffers-zest_growmeshindexbuffers class=md-nav__link> <span class=md-ellipsis> zest_GrowMeshVertexBuffers / zest_GrowMeshIndexBuffers </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayervertexmemoryinuse-zest_getlayerindexmemoryinuse class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexMemoryInUse / zest_GetLayerIndexMemoryInUse </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#drawing class=md-nav__link> <span class=md-ellipsis> Drawing </span> </a> <nav class=md-nav aria-label=Drawing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_drawinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancemeshlayer class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceMeshLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_drawinstancemeshlayerwithpipeline class=md-nav__link> <span class=md-ellipsis> zest_DrawInstanceMeshLayerWithPipeline </span> </a> </li> <li class=md-nav__item> <a href=#zest_uploadlayerstagingdata class=md-nav__link> <span class=md-ellipsis> zest_UploadLayerStagingData </span> </a> </li> <li class=md-nav__item> <a href=#zest_uploadinstancelayerdata class=md-nav__link> <span class=md-ellipsis> zest_UploadInstanceLayerData </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-properties class=md-nav__link> <span class=md-ellipsis> Layer Properties </span> </a> <nav class=md-nav aria-label="Layer Properties"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_setlayerviewport class=md-nav__link> <span class=md-ellipsis> zest_SetLayerViewPort </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerscissor class=md-nav__link> <span class=md-ellipsis> zest_SetLayerScissor </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerdrawingviewport class=md-nav__link> <span class=md-ellipsis> zest_SetLayerDrawingViewport </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayersizetoswapchain class=md-nav__link> <span class=md-ellipsis> zest_SetLayerSizeToSwapchain </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayersize class=md-nav__link> <span class=md-ellipsis> zest_SetLayerSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerscissor-zest_getlayerviewport class=md-nav__link> <span class=md-ellipsis> zest_GetLayerScissor / zest_GetLayerViewport </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayercolor-zest_setlayercolorf class=md-nav__link> <span class=md-ellipsis> zest_SetLayerColor / zest_SetLayerColorf </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerintensity class=md-nav__link> <span class=md-ellipsis> zest_SetLayerIntensity </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayerpushconstants-zest_getlayerpushconstants class=md-nav__link> <span class=md-ellipsis> zest_SetLayerPushConstants / zest_GetLayerPushConstants </span> </a> </li> <li class=md-nav__item> <a href=#zest_setlayeruserdata-zest_getlayeruserdata class=md-nav__link> <span class=md-ellipsis> zest_SetLayerUserData / zest_GetLayerUserData </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-reset class=md-nav__link> <span class=md-ellipsis> Layer Reset </span> </a> <nav class=md-nav aria-label="Layer Reset"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_resetlayer class=md-nav__link> <span class=md-ellipsis> zest_ResetLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_resetinstancelayer class=md-nav__link> <span class=md-ellipsis> zest_ResetInstanceLayer </span> </a> </li> <li class=md-nav__item> <a href=#zest_resetinstancelayerdrawing class=md-nav__link> <span class=md-ellipsis> zest_ResetInstanceLayerDrawing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#draw-instructions class=md-nav__link> <span class=md-ellipsis> Draw Instructions </span> </a> <nav class=md-nav aria-label="Draw Instructions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_nextlayerinstruction class=md-nav__link> <span class=md-ellipsis> zest_NextLayerInstruction </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerinstruction-zest_getlayerinstructioncount class=md-nav__link> <span class=md-ellipsis> zest_GetLayerInstruction / zest_GetLayerInstructionCount </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffer-access class=md-nav__link> <span class=md-ellipsis> Buffer Access </span> </a> <nav class=md-nav aria-label="Buffer Access"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_getlayervertexbuffer-zest_getlayerresourcebuffer class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexBuffer / zest_GetLayerResourceBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerstagingvertexbuffer-zest_getlayerstagingindexbuffer class=md-nav__link> <span class=md-ellipsis> zest_GetLayerStagingVertexBuffer / zest_GetLayerStagingIndexBuffer </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayervertexdescriptorindex class=md-nav__link> <span class=md-ellipsis> zest_GetLayerVertexDescriptorIndex </span> </a> </li> <li class=md-nav__item> <a href=#zest_getlayerframeinflight class=md-nav__link> <span class=md-ellipsis> zest_GetLayerFrameInFlight </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#frame-graph-integration class=md-nav__link> <span class=md-ellipsis> Frame Graph Integration </span> </a> <nav class=md-nav aria-label="Frame Graph Integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_addtransientlayerresource class=md-nav__link> <span class=md-ellipsis> zest_AddTransientLayerResource </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=layer-api>Layer API<a class=headerlink href=#layer-api title="Permanent link">&para;</a></h1> <p>Layers are the primary mechanism for batching and drawing instanced geometry (sprites, billboards, meshes). They manage staging buffers, draw instructions, and automatic buffer growth.</p> <p>You can consider layers as a convenient way to do instanced based drawing but they're not essential and you can easily roll your own method depending on what you need.</p> <h2 id=layer-types>Layer Types<a class=headerlink href=#layer-types title="Permanent link">&para;</a></h2> <p>Zest provides three layer types:</p> <ul> <li><strong>Instance Layer</strong> - For sprites, billboards, and 2D quads. Each instance is a single struct drawn as a quad or whatever else you construct in the vertex shader.</li> <li><strong>Mesh Layer</strong> - For dynamic geometry where you control vertices and indices directly.</li> <li><strong>Instance Mesh Layer</strong> - For instanced 3D meshes. Upload meshes once, then draw many instances.</li> </ul> <hr> <h2 id=layer-creation>Layer Creation<a class=headerlink href=#layer-creation title="Permanent link">&para;</a></h2> <h3 id=zest_createinstancelayer>zest_CreateInstanceLayer<a class=headerlink href=#zest_createinstancelayer title="Permanent link">&para;</a></h3> <p>Create an instance layer for drawing sprites, billboards, or other small pieces of geometry that you construct in the vertex shader. The layer manages staging buffers that auto-grow as needed.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=nf>zest_CreateInstanceLayer</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>type_size</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>context</code> - The Zest context - <code>name</code> - Unique name for the layer - <code>type_size</code> - Size of your instance struct in bytes (e.g., <code>sizeof(my_sprite_t)</code>)</p> <p><strong>Returns:</strong> Handle to the created layer.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>typedef</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=n>zest_vec4</span><span class=w> </span><span class=n>position</span><span class=p>;</span><span class=w>  </span><span class=c1>// x, y, z, scale</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>zest_vec4</span><span class=w> </span><span class=n>uv</span><span class=p>;</span><span class=w>        </span><span class=c1>// u, v, width, height</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>color</span><span class=p>;</span><span class=w>     </span><span class=c1>// packed RGBA</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=p>}</span><span class=w> </span><span class=n>sprite_instance_t</span><span class=p>;</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>sprites</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateInstanceLayer</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;sprites&quot;</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>sprite_instance_t</span><span class=p>));</span>
</span></code></pre></div></p> <hr> <h3 id=zest_createfifinstancelayer>zest_CreateFIFInstanceLayer<a class=headerlink href=#zest_createfifinstancelayer title="Permanent link">&para;</a></h3> <p>Create an instance layer with separate buffers for each frame-in-flight. Use this when you need manual control over buffer uploads rather than using transient buffers each frame.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=nf>zest_CreateFIFInstanceLayer</span><span class=p>(</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=p>,</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>type_size</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>max_instances</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>context</code> - The Zest context - <code>name</code> - Unique name for the layer - <code>type_size</code> - Size of your instance struct in bytes - <code>max_instances</code> - Initial capacity for instances</p> <p><strong>Returns:</strong> Handle to the created layer.</p> <hr> <h3 id=zest_createmeshlayer>zest_CreateMeshLayer<a class=headerlink href=#zest_createmeshlayer title="Permanent link">&para;</a></h3> <p>Create a mesh layer for dynamic geometry where you build vertices and indices each frame or just have a static mesh that you upload once and draw whenever you need.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=nf>zest_CreateMeshLayer</span><span class=p>(</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>vertex_type_size</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>context</code> - The Zest context - <code>name</code> - Unique name for the layer - <code>vertex_type_size</code> - Size of your vertex struct in bytes</p> <p><strong>Returns:</strong> Handle to the created layer.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>typedef</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>zest_vec3</span><span class=w> </span><span class=n>position</span><span class=p>;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=n>zest_vec2</span><span class=w> </span><span class=n>uv</span><span class=p>;</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>color</span><span class=p>;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=p>}</span><span class=w> </span><span class=n>mesh_vertex_t</span><span class=p>;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>dynamic_mesh</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateMeshLayer</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;dynamic_geo&quot;</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>mesh_vertex_t</span><span class=p>));</span>
</span></code></pre></div></p> <hr> <h3 id=zest_createinstancemeshlayer>zest_CreateInstanceMeshLayer<a class=headerlink href=#zest_createinstancemeshlayer title="Permanent link">&para;</a></h3> <p>Create an instance mesh layer for drawing many instances of pre-uploaded meshes. Add meshes to the layer with <code>zest_AddMeshToLayer</code>, then draw instances each frame using an index to the mesh in the layer that you want to draw.</p> <p>You must calculate the required vertex and index capacity that you'll need ahead of time as the vertex and index capacity of the layer will not be grown as needed.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=nf>zest_CreateInstanceMeshLayer</span><span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=p>,</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>instance_struct_size</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>vertex_capacity</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>index_capacity</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>context</code> - The Zest context - <code>name</code> - Unique name for the layer - <code>instance_struct_size</code> - Size of your instance struct in bytes - <code>vertex_capacity</code> - Initial vertex buffer capacity in bytes - <code>index_capacity</code> - Initial index buffer capacity in bytes</p> <p><strong>Returns:</strong> Handle to the created layer.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>typedef</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=n>zest_matrix4</span><span class=w> </span><span class=n>transform</span><span class=p>;</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=n>zest_vec4</span><span class=w> </span><span class=n>color</span><span class=p>;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=p>}</span><span class=w> </span><span class=n>mesh_instance_t</span><span class=p>;</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>meshes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateInstanceMeshLayer</span><span class=p>(</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;3d_meshes&quot;</span><span class=p>,</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>    </span><span class=k>sizeof</span><span class=p>(</span><span class=n>mesh_instance_t</span><span class=p>),</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>    </span><span class=mi>1024</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1024</span><span class=p>,</span><span class=w>  </span><span class=c1>// 1MB vertex buffer</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>    </span><span class=mi>512</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>1024</span><span class=w>    </span><span class=c1>// 512KB index buffer</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_getlayer>zest_GetLayer<a class=headerlink href=#zest_getlayer title="Permanent link">&para;</a></h3> <p>Get a layer pointer from a handle. Call once per frame and reuse the pointer for better performance.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=n>zest_layer</span><span class=w> </span><span class=nf>zest_GetLayer</span><span class=p>(</span><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>handle</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>handle</code> - Layer handle from creation</p> <p><strong>Returns:</strong> Layer pointer for use with other layer functions.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_GetLayer</span><span class=p>(</span><span class=n>sprite_layer_handle</span><span class=p>);</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1>// Use &#39;layer&#39; for all subsequent operations this frame</span>
</span></code></pre></div></p> <hr> <h3 id=zest_freelayer>zest_FreeLayer<a class=headerlink href=#zest_freelayer title="Permanent link">&para;</a></h3> <p>Free a layer and all its resources.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_FreeLayer</span><span class=p>(</span><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=instance-recording>Instance Recording<a class=headerlink href=#instance-recording title="Permanent link">&para;</a></h2> <h3 id=zest_startinstanceinstructions>zest_StartInstanceInstructions<a class=headerlink href=#zest_startinstanceinstructions title="Permanent link">&para;</a></h3> <p>Begin recording instances for a layer. This is generally used internally but can be used for more advanced things where you want manage your own instance instructions.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_StartInstanceInstructions</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Usage:</strong> Prepares the layer for receiving new instance data. Must be paired with <code>zest_EndInstanceInstructions</code>.</p> <hr> <h3 id=zest_endinstanceinstructions>zest_EndInstanceInstructions<a class=headerlink href=#zest_endinstanceinstructions title="Permanent link">&para;</a></h3> <p>End recording instances for a layer. Call after all instances are added. For advanced used if your managing your own instanct instructions. This will add the current instruction to the list of instructions in the layer ready to be processed when rendering and executing draw calls.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_EndInstanceInstructions</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Usage:</strong> Finalizes the current draw instruction. Required before the layer can be drawn.</p> <hr> <h3 id=zest_maybeendinstanceinstructions>zest_MaybeEndInstanceInstructions<a class=headerlink href=#zest_maybeendinstanceinstructions title="Permanent link">&para;</a></h3> <p>Conditionally end instance instructions if the frame-in-flight changed. Useful for FIF layers with manual buffer management.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>zest_bool</span><span class=w> </span><span class=nf>zest_MaybeEndInstanceInstructions</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Returns:</strong> <code>ZEST_TRUE</code> if instructions were ended, <code>ZEST_FALSE</code> otherwise.</p> <hr> <h3 id=zest_nextinstance>zest_NextInstance<a class=headerlink href=#zest_nextinstance title="Permanent link">&para;</a></h3> <p>Get a pointer to the next instance slot and advance the instance pointer. You'll need to use this function when creating your "DrawSprite/DrawBillboard/DrawMeshInstance" function.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=nf>zest_NextInstance</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Returns:</strong> Pointer to the next instance slot. Cast to your instance struct type.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>zest_SetInstanceInstructions</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>pipeline_template</span><span class=p>);</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sprite_count</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=n>sprite_instance_t</span><span class=w> </span><span class=o>*</span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>sprite_instance_t</span><span class=o>*</span><span class=p>)</span><span class=n>zest_NextInstance</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=n>instance</span><span class=o>-&gt;</span><span class=n>position</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>position</span><span class=p>;</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=n>instance</span><span class=o>-&gt;</span><span class=n>uv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>uv</span><span class=p>;</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=n>instance</span><span class=o>-&gt;</span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>color</span><span class=p>;</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=p>}</span>
</span></code></pre></div></p> <hr> <h3 id=zest_drawinstancebuffer>zest_DrawInstanceBuffer<a class=headerlink href=#zest_drawinstancebuffer title="Permanent link">&para;</a></h3> <p>Copy a buffer of pre-prepared instances directly into the layer. Useful when instance data is computed elsewhere.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>zest_draw_buffer_result</span><span class=w> </span><span class=nf>zest_DrawInstanceBuffer</span><span class=p>(</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>src</span><span class=p>,</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>amount</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>layer</code> - The layer to draw to - <code>src</code> - Source buffer containing instance data - <code>amount</code> - Number of instances to copy</p> <p><strong>Returns:</strong> Result enum: - <code>zest_draw_buffer_result_ok</code> - Success - <code>zest_draw_buffer_result_buffer_grew</code> - Buffer was resized - <code>zest_draw_buffer_result_failed_to_grow</code> - Failed to resize buffer</p> <hr> <h3 id=zest_drawinstanceinstruction>zest_DrawInstanceInstruction<a class=headerlink href=#zest_drawinstanceinstruction title="Permanent link">&para;</a></h3> <p>Record a draw instruction for a number of instances when writing directly to the staging buffer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_DrawInstanceInstruction</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>amount</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>layer</code> - The layer - <code>amount</code> - Number of instances to draw</p> <hr> <h2 id=instance-layer-state>Instance Layer State<a class=headerlink href=#instance-layer-state title="Permanent link">&para;</a></h2> <h3 id=zest_startinstancedrawing>zest_StartInstanceDrawing<a class=headerlink href=#zest_startinstancedrawing title="Permanent link">&para;</a></h3> <p>Set the pipeline for the current draw instruction. Call this before adding instances that should use a specific pipeline.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_StartInstanceDrawing</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_pipeline_template</span><span class=w> </span><span class=n>pipeline</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>layer</code> - The layer - <code>pipeline</code> - Pipeline template to use for drawing</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>// Draw some sprites specifying a pipeline that you want to use for the draw call</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=n>zest_StartInstanceDrawing</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>sprite_pipeline</span><span class=p>);</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>normal_sprites</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>    </span><span class=n>sprite_instance_t</span><span class=w> </span><span class=o>*</span><span class=n>inst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>sprite_instance_t</span><span class=o>*</span><span class=p>)</span><span class=n>zest_NextInstance</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=c1>// ... fill instance data</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=p>}</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=c1>// Switch pipeline for glowing sprites. This will end the previous instruction and start a new one.</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=n>zest_StartInstanceDrawing</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>glow_pipeline</span><span class=p>);</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>glow_sprites</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=w>    </span><span class=n>sprite_instance_t</span><span class=w> </span><span class=o>*</span><span class=n>inst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>sprite_instance_t</span><span class=o>*</span><span class=p>)</span><span class=n>zest_NextInstance</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>    </span><span class=c1>// ... fill instance data</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=p>}</span>
</span></code></pre></div></p> <hr> <h3 id=zest_getinstancelayercount>zest_GetInstanceLayerCount<a class=headerlink href=#zest_getinstancelayercount title="Permanent link">&para;</a></h3> <p>Get the current number of instances recorded in the layer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=n>zest_uint</span><span class=w> </span><span class=nf>zest_GetInstanceLayerCount</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayerinstancesize>zest_GetLayerInstanceSize<a class=headerlink href=#zest_getlayerinstancesize title="Permanent link">&para;</a></h3> <p>Get the total size in bytes of all instances in the layer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=n>zest_size</span><span class=w> </span><span class=nf>zest_GetLayerInstanceSize</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=mesh-layer-operations>Mesh Layer Operations<a class=headerlink href=#mesh-layer-operations title="Permanent link">&para;</a></h2> <h3 id=zest_addmeshtolayer>zest_AddMeshToLayer<a class=headerlink href=#zest_addmeshtolayer title="Permanent link">&para;</a></h3> <p>Add a mesh to an instance mesh layer. The mesh data is uploaded to the GPU and can be instanced many times.</p> <blockquote> <p>Note that the meshes that you add <strong>must</strong> use the same vertex struct.</p> </blockquote> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=n>zest_uint</span><span class=w> </span><span class=nf>zest_AddMeshToLayer</span><span class=p>(</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>    </span><span class=n>zest_mesh</span><span class=w> </span><span class=n>src_mesh</span><span class=p>,</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>texture_index</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>layer</code> - Instance mesh layer - <code>src_mesh</code> - Source mesh handle - <code>texture_index</code> - Texture bindless index for this mesh</p> <p><strong>Returns:</strong> Mesh index for use with <code>zest_StartInstanceMeshDrawing</code>.</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=n>zest_mesh</span><span class=w> </span><span class=n>cube_mesh</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateMesh</span><span class=p>(...);</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=n>zest_uint</span><span class=w> </span><span class=n>cube_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_AddMeshToLayer</span><span class=p>(</span><span class=n>mesh_layer</span><span class=p>,</span><span class=w> </span><span class=n>cube_mesh</span><span class=p>,</span><span class=w> </span><span class=n>cube_texture_index</span><span class=p>);</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=c1>// Later, when drawing:</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=n>zest_StartInstanceMeshDrawing</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>cube_id</span><span class=p>,</span><span class=w> </span><span class=n>mesh_pipeline</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_getlayermeshoffsets>zest_GetLayerMeshOffsets<a class=headerlink href=#zest_getlayermeshoffsets title="Permanent link">&para;</a></h3> <p>Get offset data for a mesh in the layer. Useful for custom draw routines.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=k>const</span><span class=w> </span><span class=n>zest_mesh_offset_data_t</span><span class=o>*</span><span class=w> </span><span class=nf>zest_GetLayerMeshOffsets</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>mesh_index</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Returns:</strong> Pointer to offset data containing: - <code>vertex_offset</code> - Offset in vertex buffer - <code>index_offset</code> - Offset in index buffer - <code>vertex_count</code> - Number of vertices - <code>index_count</code> - Number of indices - <code>texture_index</code> - Associated texture descriptor index</p> <hr> <h3 id=zest_getlayermeshtextureindex>zest_GetLayerMeshTextureIndex<a class=headerlink href=#zest_getlayermeshtextureindex title="Permanent link">&para;</a></h3> <p>Get the texture descriptor index associated with a mesh.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=n>zest_uint</span><span class=w> </span><span class=nf>zest_GetLayerMeshTextureIndex</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>mesh_index</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setmeshdrawing>zest_SetMeshDrawing<a class=headerlink href=#zest_setmeshdrawing title="Permanent link">&para;</a></h3> <p>Set the pipeline for mesh layer drawing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetMeshDrawing</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_pipeline_template</span><span class=w> </span><span class=n>pipeline</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_startinstancemeshdrawing>zest_StartInstanceMeshDrawing<a class=headerlink href=#zest_startinstancemeshdrawing title="Permanent link">&para;</a></h3> <p>Set up drawing for a specific mesh with a pipeline. Call this and then add instances that you want to draw</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_StartInstanceMeshDrawing</span><span class=p>(</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>mesh_index</span><span class=p>,</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>    </span><span class=n>zest_pipeline_template</span><span class=w> </span><span class=n>pipeline</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=n>zest_StartInstanceMeshDrawing</span><span class=p>(</span><span class=n>mesh_layer</span><span class=p>,</span><span class=w> </span><span class=n>mesh_index</span><span class=p>,</span><span class=w> </span><span class=n>app</span><span class=o>-&gt;</span><span class=n>shadow_pipeline</span><span class=p>);</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=c1>//Your own function to fill out instance data</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=kt>void</span><span class=w> </span><span class=nf>DrawInstancedMesh</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>position</span><span class=p>,</span><span class=w> </span><span class=n>rotation</span><span class=p>,</span><span class=w> </span><span class=n>scale</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span></code></pre></div></p> <hr> <h3 id=zest_getvertexwritebuffer-zest_getindexwritebuffer>zest_GetVertexWriteBuffer / zest_GetIndexWriteBuffer<a class=headerlink href=#zest_getvertexwritebuffer-zest_getindexwritebuffer title="Permanent link">&para;</a></h3> <p>Get the staging buffers for direct vertex/index writing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetVertexWriteBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetIndexWriteBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_pushindex>zest_PushIndex<a class=headerlink href=#zest_pushindex title="Permanent link">&para;</a></h3> <p>Push an index to the index staging buffer. Automatically grows the buffer if needed.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_PushIndex</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>offset</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_growmeshvertexbuffers-zest_growmeshindexbuffers>zest_GrowMeshVertexBuffers / zest_GrowMeshIndexBuffers<a class=headerlink href=#zest_growmeshvertexbuffers-zest_growmeshindexbuffers title="Permanent link">&para;</a></h3> <p>Manually trigger buffer growth when you know more space is needed.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_GrowMeshVertexBuffers</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_GrowMeshIndexBuffers</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayervertexmemoryinuse-zest_getlayerindexmemoryinuse>zest_GetLayerVertexMemoryInUse / zest_GetLayerIndexMemoryInUse<a class=headerlink href=#zest_getlayervertexmemoryinuse-zest_getlayerindexmemoryinuse title="Permanent link">&para;</a></h3> <p>Get current memory usage for mesh layers.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=n>zest_size</span><span class=w> </span><span class=nf>zest_GetLayerVertexMemoryInUse</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=n>zest_size</span><span class=w> </span><span class=nf>zest_GetLayerIndexMemoryInUse</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=drawing>Drawing<a class=headerlink href=#drawing title="Permanent link">&para;</a></h2> <h3 id=zest_drawinstancelayer>zest_DrawInstanceLayer<a class=headerlink href=#zest_drawinstancelayer title="Permanent link">&para;</a></h3> <p>Draw all instances in a layer. Use as a frame graph task callback.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_DrawInstanceLayer</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>zest_command_list</span><span class=w> </span><span class=n>command_list</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>user_data</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>command_list</code> - Command list from the frame graph - <code>user_data</code> - Layer pointer (pass via <code>zest_SetPassTask</code>)</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=n>zest_BeginRenderPass</span><span class=p>(</span><span class=s>&quot;sprites&quot;</span><span class=p>);</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=w>    </span><span class=n>zest_SetPassTask</span><span class=p>(</span><span class=n>zest_DrawInstanceLayer</span><span class=p>,</span><span class=w> </span><span class=n>sprite_layer</span><span class=p>);</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=n>zest_EndPass</span><span class=p>();</span>
</span></code></pre></div></p> <hr> <h3 id=zest_drawinstancemeshlayer>zest_DrawInstanceMeshLayer<a class=headerlink href=#zest_drawinstancemeshlayer title="Permanent link">&para;</a></h3> <p>Draw all instances in an instance mesh layer. Use as a frame graph task callback.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_DrawInstanceMeshLayer</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>zest_command_list</span><span class=w> </span><span class=n>command_list</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>user_data</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>command_list</code> - Command list from the frame graph - <code>user_data</code> - Layer pointer (pass via <code>zest_SetPassTask</code>)</p> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=n>zest_BeginRenderPass</span><span class=p>(</span><span class=s>&quot;Meshes&quot;</span><span class=p>);</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>    </span><span class=n>zest_SetPassTask</span><span class=p>(</span><span class=n>zest_DrawInstanceMeshLayer</span><span class=p>,</span><span class=w> </span><span class=n>mesh_layer</span><span class=p>);</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=n>zest_EndPass</span><span class=p>();</span>
</span></code></pre></div></p> <hr> <h3 id=zest_drawinstancemeshlayerwithpipeline>zest_DrawInstanceMeshLayerWithPipeline<a class=headerlink href=#zest_drawinstancemeshlayerwithpipeline title="Permanent link">&para;</a></h3> <p>Draw an instance mesh layer with a specific pipeline override. This is useful for when you need to draw multiple passes of the same meshes. For example one pass for rendering shadow depth followed by a normal render with the shadows. See the cascading shadows example for a demonstration of this.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_DrawInstanceMeshLayerWithPipeline</span><span class=p>(</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>zest_command_list</span><span class=w> </span><span class=n>command_list</span><span class=p>,</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>    </span><span class=n>zest_pipeline_template</span><span class=w> </span><span class=n>pipeline</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_uploadlayerstagingdata>zest_UploadLayerStagingData<a class=headerlink href=#zest_uploadlayerstagingdata title="Permanent link">&para;</a></h3> <p>Upload layer staging data to the GPU. Call in an upload callback before drawing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_UploadLayerStagingData</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>zest_command_list</span><span class=w> </span><span class=n>command_list</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_uploadinstancelayerdata>zest_UploadInstanceLayerData<a class=headerlink href=#zest_uploadinstancelayerdata title="Permanent link">&para;</a></h3> <p>Callback for uploading instance layer data. Use with frame graph upload tasks.</p> <blockquote> <p>Note that if you have more then one layer to upload then you can call multiple of these functions in your own callback instead rather then create multiple transfer passes.</p> </blockquote> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_UploadInstanceLayerData</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>zest_command_list</span><span class=w> </span><span class=n>command_list</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>user_data</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=n>zest_BeginTransferPass</span><span class=p>(</span><span class=s>&quot;Upload Layer&quot;</span><span class=p>);</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>    </span><span class=n>zest_SetPassTask</span><span class=p>(</span><span class=n>zest_UploadInstanceLayerData</span><span class=p>,</span><span class=w> </span><span class=n>sprite_layer</span><span class=p>);</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=n>zest_EndPass</span><span class=p>();</span>
</span></code></pre></div></p> <hr> <h2 id=layer-properties>Layer Properties<a class=headerlink href=#layer-properties title="Permanent link">&para;</a></h2> <h3 id=zest_setlayerviewport>zest_SetLayerViewPort<a class=headerlink href=#zest_setlayerviewport title="Permanent link">&para;</a></h3> <p>Set the viewport and scissor for layer drawing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerViewPort</span><span class=p>(</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>,</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_width</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_height</span><span class=p>,</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>viewport_width</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>viewport_height</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Parameters:</strong> - <code>layer</code> - The layer - <code>x</code>, <code>y</code> - Scissor offset - <code>scissor_width</code>, <code>scissor_height</code> - Scissor dimensions - <code>viewport_width</code>, <code>viewport_height</code> - Viewport dimensions</p> <hr> <h3 id=zest_setlayerscissor>zest_SetLayerScissor<a class=headerlink href=#zest_setlayerscissor title="Permanent link">&para;</a></h3> <p>Set only the scissor rectangle for the current draw instruction. Call this after you start an instruction like zest_StartInstanceDrawing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerScissor</span><span class=p>(</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>offset_x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>offset_y</span><span class=p>,</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_width</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_height</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayerdrawingviewport>zest_SetLayerDrawingViewport<a class=headerlink href=#zest_setlayerdrawingviewport title="Permanent link">&para;</a></h3> <p>Set viewport/scissor for the current draw instruction. Call this after you start an instruction like zest_StartInstanceDrawing.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerDrawingViewport</span><span class=p>(</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>,</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=w>    </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_width</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>scissor_height</span><span class=p>,</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>viewport_width</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>viewport_height</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayersizetoswapchain>zest_SetLayerSizeToSwapchain<a class=headerlink href=#zest_setlayersizetoswapchain title="Permanent link">&para;</a></h3> <p>Update layer viewport to match the current swapchain size.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerSizeToSwapchain</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayersize>zest_SetLayerSize<a class=headerlink href=#zest_setlayersize title="Permanent link">&para;</a></h3> <p>Set the layer size explicitly.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerSize</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>width</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>height</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayerscissor-zest_getlayerviewport>zest_GetLayerScissor / zest_GetLayerViewport<a class=headerlink href=#zest_getlayerscissor-zest_getlayerviewport title="Permanent link">&para;</a></h3> <p>Get the current scissor/viewport settings.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=n>zest_scissor_rect_t</span><span class=w> </span><span class=nf>zest_GetLayerScissor</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=n>zest_viewport_t</span><span class=w> </span><span class=nf>zest_GetLayerViewport</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayercolor-zest_setlayercolorf>zest_SetLayerColor / zest_SetLayerColorf<a class=headerlink href=#zest_setlayercolor-zest_setlayercolorf title="Permanent link">&para;</a></h3> <p>Set the layer color. The alpha value controls the blend between additive (0) and alpha blending (1).</p> <blockquote> <p><strong>These functions will be removed</strong></p> </blockquote> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerColor</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_byte</span><span class=w> </span><span class=n>r</span><span class=p>,</span><span class=w> </span><span class=n>zest_byte</span><span class=w> </span><span class=n>g</span><span class=p>,</span><span class=w> </span><span class=n>zest_byte</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>zest_byte</span><span class=w> </span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerColorf</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>r</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>g</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>a</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Example:</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=c1>// Full opacity alpha blending</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=n>zest_SetLayerColorf</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>);</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=c1>// Semi-additive blending</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=n>zest_SetLayerColorf</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.5f</span><span class=p>);</span>
</span></code></pre></div></p> <hr> <h3 id=zest_setlayerintensity>zest_SetLayerIntensity<a class=headerlink href=#zest_setlayerintensity title="Permanent link">&para;</a></h3> <p>Set the intensity (brightness) of the layer. Values above 1.0 make sprites brighter due to pre-multiplied blending.</p> <blockquote> <p><strong>Will be removed</strong></p> </blockquote> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerIntensity</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>value</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayerpushconstants-zest_getlayerpushconstants>zest_SetLayerPushConstants / zest_GetLayerPushConstants<a class=headerlink href=#zest_setlayerpushconstants-zest_getlayerpushconstants title="Permanent link">&para;</a></h3> <p>Set or get push constants for the current draw instruction. These will get uploaded to the GPU for each instruction in the layer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerPushConstants</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>push_constants</span><span class=p>,</span><span class=w> </span><span class=n>zest_size</span><span class=w> </span><span class=n>size</span><span class=p>);</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=nf>zest_GetLayerPushConstants</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setlayeruserdata-zest_getlayeruserdata>zest_SetLayerUserData / zest_GetLayerUserData<a class=headerlink href=#zest_setlayeruserdata-zest_getlayeruserdata title="Permanent link">&para;</a></h3> <p>Store custom data with a layer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetLayerUserData</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>);</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=cp>#define zest_GetLayerUserData(type, layer) ((type *)layer-&gt;user_data)</span>
</span></code></pre></div> <hr> <h2 id=layer-reset>Layer Reset<a class=headerlink href=#layer-reset title="Permanent link">&para;</a></h2> <h3 id=zest_resetlayer>zest_ResetLayer<a class=headerlink href=#zest_resetlayer title="Permanent link">&para;</a></h3> <p>Set the layer frame in flight to the next layer. Use this if you're manually setting the current fif for the layer so that you can avoid uploading the staging buffers every frame and only do so when it's neccessary.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_ResetLayer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_resetinstancelayer>zest_ResetInstanceLayer<a class=headerlink href=#zest_resetinstancelayer title="Permanent link">&para;</a></h3> <p>Same as ResetLayer but specifically for an instance layer</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_ResetInstanceLayer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_resetinstancelayerdrawing>zest_ResetInstanceLayerDrawing<a class=headerlink href=#zest_resetinstancelayerdrawing title="Permanent link">&para;</a></h3> <p>Reset the drawing for an instance layer. This is called after all drawing is done and dispatched to the gpu.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_ResetInstanceLayerDrawing</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=draw-instructions>Draw Instructions<a class=headerlink href=#draw-instructions title="Permanent link">&para;</a></h2> <h3 id=zest_nextlayerinstruction>zest_NextLayerInstruction<a class=headerlink href=#zest_nextlayerinstruction title="Permanent link">&para;</a></h3> <p>Get the next draw instruction slot.</p> <p><div class="language-cpp highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=n>zest_layer_instruction_t</span><span class=o>*</span><span class=w> </span><span class=nf>zest_NextLayerInstruction</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <strong>Example</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=n>zest_layer_instruction_t</span><span class=w> </span><span class=o>*</span><span class=n>current</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_NextLayerInstruction</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=k>while</span><span class=p>(</span><span class=n>current</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=w>    </span><span class=p>...</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=w>    </span><span class=n>zest_cmd_DrawLayerInstruction</span><span class=p>(</span><span class=n>command_list</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=n>current</span><span class=p>);</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=w>    </span><span class=n>current</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_NextLayerInstruction</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class=p>}</span>
</span></code></pre></div></p> <hr> <h3 id=zest_getlayerinstruction-zest_getlayerinstructioncount>zest_GetLayerInstruction / zest_GetLayerInstructionCount<a class=headerlink href=#zest_getlayerinstruction-zest_getlayerinstructioncount title="Permanent link">&para;</a></h3> <p>Access recorded draw instructions.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=k>const</span><span class=w> </span><span class=n>zest_layer_instruction_t</span><span class=o>*</span><span class=w> </span><span class=nf>zest_GetLayerInstruction</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_uint</span><span class=w> </span><span class=n>index</span><span class=p>);</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=n>zest_uint</span><span class=w> </span><span class=nf>zest_GetLayerInstructionCount</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <p><strong>Example</strong> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=n>zest_uint</span><span class=w> </span><span class=n>count</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_GetLayerInstructionCount</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=k>for</span><span class=p>(</span><span class=n>zest_uint</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>count</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>zest_layer_instruction_t</span><span class=o>*</span><span class=w> </span><span class=nf>zest_GetLayerInstruction</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>);</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=w>    </span><span class=p>...</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=w>    </span><span class=n>zest_cmd_DrawLayerInstruction</span><span class=p>(</span><span class=n>command_list</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=n>current</span><span class=p>);</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=p>}</span>
</span></code></pre></div></p> <hr> <h2 id=buffer-access>Buffer Access<a class=headerlink href=#buffer-access title="Permanent link">&para;</a></h2> <h3 id=zest_getlayervertexbuffer-zest_getlayerresourcebuffer>zest_GetLayerVertexBuffer / zest_GetLayerResourceBuffer<a class=headerlink href=#zest_getlayervertexbuffer-zest_getlayerresourcebuffer title="Permanent link">&para;</a></h3> <p>Get device-side buffers.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetLayerVertexBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetLayerResourceBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayerstagingvertexbuffer-zest_getlayerstagingindexbuffer>zest_GetLayerStagingVertexBuffer / zest_GetLayerStagingIndexBuffer<a class=headerlink href=#zest_getlayerstagingvertexbuffer-zest_getlayerstagingindexbuffer title="Permanent link">&para;</a></h3> <p>Get staging buffers for CPU-side access.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetLayerStagingVertexBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=n>zest_buffer</span><span class=w> </span><span class=nf>zest_GetLayerStagingIndexBuffer</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayervertexdescriptorindex>zest_GetLayerVertexDescriptorIndex<a class=headerlink href=#zest_getlayervertexdescriptorindex title="Permanent link">&para;</a></h3> <p>Get the bindless descriptor index for the layer's vertex buffer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=n>zest_uint</span><span class=w> </span><span class=nf>zest_GetLayerVertexDescriptorIndex</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>zest_bool</span><span class=w> </span><span class=n>last_frame</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_getlayerframeinflight>zest_GetLayerFrameInFlight<a class=headerlink href=#zest_getlayerframeinflight title="Permanent link">&para;</a></h3> <p>Get the current frame-in-flight index for the layer.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=kt>int</span><span class=w> </span><span class=nf>zest_GetLayerFrameInFlight</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=frame-graph-integration>Frame Graph Integration<a class=headerlink href=#frame-graph-integration title="Permanent link">&para;</a></h2> <h3 id=zest_addtransientlayerresource>zest_AddTransientLayerResource<a class=headerlink href=#zest_addtransientlayerresource title="Permanent link">&para;</a></h3> <p>Add a layer's buffer as a transient resource in the frame graph. This is an essential function when using layers to draw instanced data.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=n>zest_resource_node</span><span class=w> </span><span class=nf>zest_AddTransientLayerResource</span><span class=p>(</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=w>    </span><span class=n>zest_bool</span><span class=w> </span><span class=n>prev_fif</span>
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=p>);</span>
</span></code></pre></div> <p><strong>Example</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=n>zest_resource_node</span><span class=w> </span><span class=n>billboard_layer_resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_AddTransientLayerResource</span><span class=p>(</span><span class=s>&quot;Billboards&quot;</span><span class=p>,</span><span class=w> </span><span class=n>billboard_layer</span><span class=p>,</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=p>...</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=n>zest_BeginRenderPass</span><span class=p>(</span><span class=s>&quot;Particles Pass&quot;</span><span class=p>);</span>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=n>zest_ConnectInput</span><span class=p>(</span><span class=n>billboard_layer_resource</span><span class=p>);</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=n>zest_SetPassTask</span><span class=p>(</span><span class=n>zest_DrawInstanceLayer</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>);</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a><span class=n>zest_ConnectSwapChainOutput</span><span class=p>();</span>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a><span class=n>zest_EndPass</span><span class=p>();</span>
</span></code></pre></div> <hr> <h2 id=complete-example>Complete Example<a class=headerlink href=#complete-example title="Permanent link">&para;</a></h2> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=c1>// Create a sprite layer</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=n>zest_layer_handle</span><span class=w> </span><span class=n>sprite_handle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateInstanceLayer</span><span class=p>(</span><span class=n>context</span><span class=p>,</span><span class=w> </span><span class=s>&quot;sprites&quot;</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>sprite_t</span><span class=p>));</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=c1>// In your update function:</span>
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=kt>void</span><span class=w> </span><span class=nf>update_sprites</span><span class=p>(</span><span class=n>zest_layer</span><span class=w> </span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>sprite_data_t</span><span class=w> </span><span class=o>*</span><span class=n>sprites</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>count</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-64-6><a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=w>    </span><span class=n>zest_StartInstanceDrawing</span><span class=p>(</span><span class=n>layer</span><span class=p>,</span><span class=w> </span><span class=n>sprite_pipeline</span><span class=p>);</span>
</span><span id=__span-64-7><a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>
</span><span id=__span-64-8><a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>count</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-64-9><a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a><span class=w>        </span><span class=n>sprite_t</span><span class=w> </span><span class=o>*</span><span class=n>inst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>sprite_t</span><span class=o>*</span><span class=p>)</span><span class=n>zest_NextInstance</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span>
</span><span id=__span-64-10><a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a><span class=w>        </span><span class=n>inst</span><span class=o>-&gt;</span><span class=n>position</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>position</span><span class=p>;</span>
</span><span id=__span-64-11><a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a><span class=w>        </span><span class=n>inst</span><span class=o>-&gt;</span><span class=n>uv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>uv</span><span class=p>;</span>
</span><span id=__span-64-12><a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a><span class=w>        </span><span class=n>inst</span><span class=o>-&gt;</span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sprites</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>color</span><span class=p>;</span>
</span><span id=__span-64-13><a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-64-14><a id=__codelineno-64-14 name=__codelineno-64-14 href=#__codelineno-64-14></a>
</span><span id=__span-64-15><a id=__codelineno-64-15 name=__codelineno-64-15 href=#__codelineno-64-15></a><span class=w>    </span><span class=n>zest_EndInstanceInstructions</span><span class=p>(</span><span class=n>layer</span><span class=p>);</span><span class=w>  </span>
</span><span id=__span-64-16><a id=__codelineno-64-16 name=__codelineno-64-16 href=#__codelineno-64-16></a><span class=p>}</span>
</span><span id=__span-64-17><a id=__codelineno-64-17 name=__codelineno-64-17 href=#__codelineno-64-17></a>
</span><span id=__span-64-18><a id=__codelineno-64-18 name=__codelineno-64-18 href=#__codelineno-64-18></a><span class=c1>// In your frame graph setup:</span>
</span><span id=__span-64-19><a id=__codelineno-64-19 name=__codelineno-64-19 href=#__codelineno-64-19></a><span class=n>zest_frame_graph</span><span class=w> </span><span class=nf>setup_frame_graph</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-64-20><a id=__codelineno-64-20 name=__codelineno-64-20 href=#__codelineno-64-20></a><span class=w>    </span><span class=n>zest_layer</span><span class=w> </span><span class=n>sprite_layer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_GetLayer</span><span class=p>(</span><span class=n>sprite_layer_handle</span><span class=p>);</span>
</span><span id=__span-64-21><a id=__codelineno-64-21 name=__codelineno-64-21 href=#__codelineno-64-21></a><span class=w>    </span><span class=n>zest_BeginFrameGraph</span><span class=p>();</span>
</span><span id=__span-64-22><a id=__codelineno-64-22 name=__codelineno-64-22 href=#__codelineno-64-22></a><span class=w>    </span><span class=n>zest_resource_node</span><span class=w> </span><span class=n>sprite_layer_resource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_AddTransientLayerResource</span><span class=p>(</span><span class=s>&quot;Sprites&quot;</span><span class=p>,</span><span class=w> </span><span class=n>sprite_layer</span><span class=p>,</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-64-23><a id=__codelineno-64-23 name=__codelineno-64-23 href=#__codelineno-64-23></a>
</span><span id=__span-64-24><a id=__codelineno-64-24 name=__codelineno-64-24 href=#__codelineno-64-24></a><span class=w>    </span><span class=n>zest_BeginRenderPass</span><span class=p>(</span><span class=s>&quot;main&quot;</span><span class=p>);</span>
</span><span id=__span-64-25><a id=__codelineno-64-25 name=__codelineno-64-25 href=#__codelineno-64-25></a><span class=w>        </span><span class=n>zest_ConnectInput</span><span class=p>(</span><span class=n>sprite_layer_resource</span><span class=p>);</span>
</span><span id=__span-64-26><a id=__codelineno-64-26 name=__codelineno-64-26 href=#__codelineno-64-26></a><span class=w>        </span><span class=n>zest_ConnectSwapChainOutput</span><span class=p>();</span>
</span><span id=__span-64-27><a id=__codelineno-64-27 name=__codelineno-64-27 href=#__codelineno-64-27></a><span class=w>        </span><span class=n>zest_SetPassTask</span><span class=p>(</span><span class=n>zest_DrawInstanceLayer</span><span class=p>,</span><span class=w> </span><span class=n>sprite_layer</span><span class=p>);</span>
</span><span id=__span-64-28><a id=__codelineno-64-28 name=__codelineno-64-28 href=#__codelineno-64-28></a><span class=w>    </span><span class=n>zest_EndPass</span><span class=p>();</span>
</span><span id=__span-64-29><a id=__codelineno-64-29 name=__codelineno-64-29 href=#__codelineno-64-29></a>
</span><span id=__span-64-30><a id=__codelineno-64-30 name=__codelineno-64-30 href=#__codelineno-64-30></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>zest_EndFrameGraph</span><span class=p>();</span>
</span><span id=__span-64-31><a id=__codelineno-64-31 name=__codelineno-64-31 href=#__codelineno-64-31></a><span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=see-also>See Also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h2> <ul> <li><a href=../../concepts/layers/ >Layers Concept</a> - Conceptual overview</li> <li><a href=../../tutorials/03-instancing/ >Instancing Tutorial</a> - Step-by-step guide</li> <li><a href=../pipeline/ >Pipeline API</a> - Pipeline template configuration</li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>