<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A lightweight single-header Vulkan rendering library"><link href=https://zest-docs.example.com/api-reference/device/ rel=canonical><link href=../ rel=prev><link href=../context/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Device API - Zest Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#device-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zest Documentation" class="md-header__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zest Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Device API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../examples/ class=md-tabs__link> Examples </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zest Documentation" class="md-nav__button md-logo" aria-label="Zest Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Zest Documentation </label> <div class=md-nav__source> <a href=https://github.com/peterigz/zest title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> peterigz/zest </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/first-application/ class=md-nav__link> <span class=md-ellipsis> First Application </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../concepts/ class="md-nav__link "> <span class=md-ellipsis> Concepts </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/device-and-context/ class=md-nav__link> <span class=md-ellipsis> Device & Context </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/frame-graph.md class=md-nav__link> <span class=md-ellipsis> Frame Graph </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/pipelines/ class=md-nav__link> <span class=md-ellipsis> Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/buffers/ class=md-nav__link> <span class=md-ellipsis> Buffers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/images/ class=md-nav__link> <span class=md-ellipsis> Images </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/layers/ class=md-nav__link> <span class=md-ellipsis> Layers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/bindless/ class=md-nav__link> <span class=md-ellipsis> Bindless Descriptors </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/memory/ class=md-nav__link> <span class=md-ellipsis> Memory Management </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/01-minimal-template/ class=md-nav__link> <span class=md-ellipsis> Minimal Template </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/02-imgui/ class=md-nav__link> <span class=md-ellipsis> Adding ImGui </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/03-instancing/ class=md-nav__link> <span class=md-ellipsis> GPU Instancing </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/04-textures/ class=md-nav__link> <span class=md-ellipsis> Loading Textures </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/05-compute/ class=md-nav__link> <span class=md-ellipsis> Compute Shaders </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/06-multipass/ class=md-nav__link> <span class=md-ellipsis> Multi-Pass Rendering </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/07-shadows/ class=md-nav__link> <span class=md-ellipsis> Shadow Mapping </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> API Reference </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Device API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Device API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#creation class=md-nav__link> <span class=md-ellipsis> Creation </span> </a> <nav class=md-nav aria-label=Creation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_implsdl2_createvulkandevice class=md-nav__link> <span class=md-ellipsis> zest_implsdl2_CreateVulkanDevice </span> </a> </li> <li class=md-nav__item> <a href=#zest_destroydevice class=md-nav__link> <span class=md-ellipsis> zest_DestroyDevice </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_setdevicepoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetDevicePoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpubufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setstagingbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetStagingBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpusmallbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUSmallBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgputransientbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUTransientBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpusmalltransientbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUSmallTransientBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setsmallhostbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetSmallHostBufferPoolSize </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#per-frame class=md-nav__link> <span class=md-ellipsis> Per-Frame </span> </a> <nav class=md-nav aria-label=Per-Frame> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_updatedevice class=md-nav__link> <span class=md-ellipsis> zest_UpdateDevice </span> </a> </li> <li class=md-nav__item> <a href=#zest_waitforidledevice class=md-nav__link> <span class=md-ellipsis> zest_WaitForIdleDevice </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#queries class=md-nav__link> <span class=md-ellipsis> Queries </span> </a> <nav class=md-nav aria-label=Queries> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_getdevicepoolsize class=md-nav__link> <span class=md-ellipsis> zest_GetDevicePoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_getdevicememorystats class=md-nav__link> <span class=md-ellipsis> zest_GetDeviceMemoryStats </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../context/ class=md-nav__link> <span class=md-ellipsis> Context API </span> </a> </li> <li class=md-nav__item> <a href=../frame-graph/ class=md-nav__link> <span class=md-ellipsis> Frame Graph API </span> </a> </li> <li class=md-nav__item> <a href=../pipeline/ class=md-nav__link> <span class=md-ellipsis> Pipeline API </span> </a> </li> <li class=md-nav__item> <a href=../buffer/ class=md-nav__link> <span class=md-ellipsis> Buffer API </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image API </span> </a> </li> <li class=md-nav__item> <a href=../layer/ class=md-nav__link> <span class=md-ellipsis> Layer API </span> </a> </li> <li class=md-nav__item> <a href=../compute/ class=md-nav__link> <span class=md-ellipsis> Compute API </span> </a> </li> <li class=md-nav__item> <a href=../commands/ class=md-nav__link> <span class=md-ellipsis> Command API </span> </a> </li> <li class=md-nav__item> <a href=../immediate/ class=md-nav__link> <span class=md-ellipsis> Immediate API </span> </a> </li> <li class=md-nav__item> <a href=../math/ class=md-nav__link> <span class=md-ellipsis> Math API </span> </a> </li> <li class=md-nav__item> <a href=../camera/ class=md-nav__link> <span class=md-ellipsis> Camera API </span> </a> </li> <li class=md-nav__item> <a href=../timer/ class=md-nav__link> <span class=md-ellipsis> Timer API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../examples/ class="md-nav__link "> <span class=md-ellipsis> Examples </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#creation class=md-nav__link> <span class=md-ellipsis> Creation </span> </a> <nav class=md-nav aria-label=Creation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_implsdl2_createvulkandevice class=md-nav__link> <span class=md-ellipsis> zest_implsdl2_CreateVulkanDevice </span> </a> </li> <li class=md-nav__item> <a href=#zest_destroydevice class=md-nav__link> <span class=md-ellipsis> zest_DestroyDevice </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_setdevicepoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetDevicePoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpubufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setstagingbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetStagingBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpusmallbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUSmallBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgputransientbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUTransientBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setgpusmalltransientbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetGPUSmallTransientBufferPoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_setsmallhostbufferpoolsize class=md-nav__link> <span class=md-ellipsis> zest_SetSmallHostBufferPoolSize </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#per-frame class=md-nav__link> <span class=md-ellipsis> Per-Frame </span> </a> <nav class=md-nav aria-label=Per-Frame> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_updatedevice class=md-nav__link> <span class=md-ellipsis> zest_UpdateDevice </span> </a> </li> <li class=md-nav__item> <a href=#zest_waitforidledevice class=md-nav__link> <span class=md-ellipsis> zest_WaitForIdleDevice </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#queries class=md-nav__link> <span class=md-ellipsis> Queries </span> </a> <nav class=md-nav aria-label=Queries> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zest_getdevicepoolsize class=md-nav__link> <span class=md-ellipsis> zest_GetDevicePoolSize </span> </a> </li> <li class=md-nav__item> <a href=#zest_getdevicememorystats class=md-nav__link> <span class=md-ellipsis> zest_GetDeviceMemoryStats </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=device-api>Device API<a class=headerlink href=#device-api title="Permanent link">&para;</a></h1> <p>Functions for device creation, configuration, and management. The device is the central object that manages the graphics backend, GPU selection, shader library, pipeline templates, bindless descriptor sets, and all GPU memory allocators. Typically you create one device per application, which can then serve one or more contexts (windows).</p> <h2 id=creation>Creation<a class=headerlink href=#creation title="Permanent link">&para;</a></h2> <h3 id=zest_implsdl2_createvulkandevice>zest_implsdl2_CreateVulkanDevice<a class=headerlink href=#zest_implsdl2_createvulkandevice title="Permanent link">&para;</a></h3> <p>Creates a Zest device with SDL2 window support.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>zest_device</span><span class=w> </span><span class=nf>zest_implsdl2_CreateVulkanDevice</span><span class=p>(</span><span class=n>zest_window_data_t</span><span class=w> </span><span class=o>*</span><span class=n>window_data</span><span class=p>,</span><span class=w> </span><span class=n>zest_bool</span><span class=w> </span><span class=n>enable_validation</span><span class=p>);</span>
</span></code></pre></div> <p>This is a convenience function that handles graphics backend initialization, GPU selection, and command queue setup for SDL2-based applications. The window must be created first with <code>zest_implsdl2_CreateWindow</code> so that the required Vulkan extensions can be queried. Use validation layers during development to catch API misuse and bugs.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>window_data</code> - Pointer to window data returned by <code>zest_implsdl2_CreateWindow</code></li> <li><code>enable_validation</code> - Enable validation layers (<code>ZEST_TRUE</code> for development, <code>ZEST_FALSE</code> for release)</li> </ul> <p><strong>Returns:</strong> Device handle</p> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>zest_window_data_t</span><span class=w> </span><span class=n>window_data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateWindow</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>1280</span><span class=p>,</span><span class=w> </span><span class=mi>768</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=s>&quot;My App&quot;</span><span class=p>);</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=c1>// Development build with validation</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateVulkanDevice</span><span class=p>(</span><span class=o>&amp;</span><span class=n>window_data</span><span class=p>,</span><span class=w> </span><span class=nb>true</span><span class=p>);</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=c1>// Release build without validation overhead</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateVulkanDevice</span><span class=p>(</span><span class=o>&amp;</span><span class=n>window_data</span><span class=p>,</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_destroydevice>zest_DestroyDevice<a class=headerlink href=#zest_destroydevice title="Permanent link">&para;</a></h3> <p>Destroys the device and frees all associated resources.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_DestroyDevice</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>);</span>
</span></code></pre></div> <p>Call this at application shutdown. This will free all GPU memory pools, shut down the graphics backend, and release all CPU allocations including any contexts. The function will warn if any memory leaks are detected.</p> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>// At application shutdown</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>zest_DestroyDevice</span><span class=p>(</span><span class=n>device</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <p>Most of the following configuration functions are for more advanced use when you want to fine tune your use of the API. Memory allocations and pool creation happens automatically internally.</p> <h3 id=zest_setdevicepoolsize>zest_SetDevicePoolSize<a class=headerlink href=#zest_setdevicepoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for a specific type of buffer allocation.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetDevicePoolSize</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=n>zest_buffer_usage_t</span><span class=w> </span><span class=n>usage</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_allocation_size</span><span class=p>,</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool for buffers matching the given usage flags. Call this after device creation but before creating contexts or resources. Pool sizes must be powers of 2.</p> <p><strong>Note</strong> if the device runs out of memory it will create and add a new pool of memory to use.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>name</code> - A descriptive name for debugging/logging</li> <li><code>usage</code> - Buffer usage and memory property flags</li> <li><code>minimum_allocation_size</code> - Smallest allocation unit (may be overridden by alignment requirements)</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <hr> <h3 id=zest_setgpubufferpoolsize>zest_SetGPUBufferPoolSize<a class=headerlink href=#zest_setgpubufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the default pool size for GPU-local buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetGPUBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool used for GPU-only buffers (vertex buffers, index buffers, etc.). Call after device creation but before creating contexts. Useful when you know your application will need more GPU memory than the default.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>zest_window_data_t</span><span class=w> </span><span class=n>window_data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateWindow</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>1280</span><span class=p>,</span><span class=w> </span><span class=mi>768</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=s>&quot;My App&quot;</span><span class=p>);</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateVulkanDevice</span><span class=p>(</span><span class=o>&amp;</span><span class=n>window_data</span><span class=p>,</span><span class=w> </span><span class=n>ZEST_FALSE</span><span class=p>);</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1>// Increase GPU buffer pool for a mesh-heavy application</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>zest_SetGPUBufferPoolSize</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zloc__KILOBYTE</span><span class=p>(</span><span class=mi>64</span><span class=p>),</span><span class=w> </span><span class=n>zloc__MEGABYTE</span><span class=p>(</span><span class=mi>256</span><span class=p>));</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateContext</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>window</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>info</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setstagingbufferpoolsize>zest_SetStagingBufferPoolSize<a class=headerlink href=#zest_setstagingbufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for staging buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetStagingBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=p>);</span>
</span></code></pre></div> <p>Staging buffers are CPU-visible memory used to upload data to the GPU (textures, mesh data, etc.). Increase this if you're loading many large assets or streaming data frequently.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>zest_window_data_t</span><span class=w> </span><span class=n>window_data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateWindow</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>50</span><span class=p>,</span><span class=w> </span><span class=mi>1280</span><span class=p>,</span><span class=w> </span><span class=mi>768</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=s>&quot;My App&quot;</span><span class=p>);</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_implsdl2_CreateVulkanDevice</span><span class=p>(</span><span class=o>&amp;</span><span class=n>window_data</span><span class=p>,</span><span class=w> </span><span class=n>ZEST_FALSE</span><span class=p>);</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1>// Larger staging pool for texture-heavy applications</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=n>zest_SetStagingBufferPoolSize</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=n>zloc__KILOBYTE</span><span class=p>(</span><span class=mi>256</span><span class=p>),</span><span class=w> </span><span class=n>zloc__MEGABYTE</span><span class=p>(</span><span class=mi>128</span><span class=p>));</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=n>zest_context</span><span class=w> </span><span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_CreateContext</span><span class=p>(</span><span class=n>device</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>window</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>info</span><span class=p>);</span>
</span></code></pre></div> <hr> <h3 id=zest_setgpusmallbufferpoolsize>zest_SetGPUSmallBufferPoolSize<a class=headerlink href=#zest_setgpusmallbufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for small GPU-local buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetGPUSmallBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool for small GPU-only buffers. This is a separate pool from the main GPU buffer pool, optimized for many small allocations with less fragmentation. Useful when your application creates numerous small buffers (e.g., per-object uniform buffers).</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <hr> <h3 id=zest_setgputransientbufferpoolsize>zest_SetGPUTransientBufferPoolSize<a class=headerlink href=#zest_setgputransientbufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for transient GPU buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetGPUTransientBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool for transient GPU buffersâ€”temporary buffers that are allocated and freed frequently within a frame or across frames. These are GPU-local buffers optimized for short-lived allocations.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <hr> <h3 id=zest_setgpusmalltransientbufferpoolsize>zest_SetGPUSmallTransientBufferPoolSize<a class=headerlink href=#zest_setgpusmalltransientbufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for small transient GPU buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetGPUSmallTransientBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool for small transient GPU buffers, combining the characteristics of both small and transient pools. Ideal for applications that frequently allocate and free many small temporary buffers.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <hr> <h3 id=zest_setsmallhostbufferpoolsize>zest_SetSmallHostBufferPoolSize<a class=headerlink href=#zest_setsmallhostbufferpoolsize title="Permanent link">&para;</a></h3> <p>Sets the pool size for small host-visible buffer allocations.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_SetSmallHostBufferPoolSize</span><span class=p>(</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>minimum_size</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=n>zest_size</span><span class=w> </span><span class=n>pool_size</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=p>);</span>
</span></code></pre></div> <p>Configures the memory pool for small CPU-accessible buffers. These buffers are host-visible and coherent, meaning the CPU can read/write them directly without explicit flushing. Useful for many small uniform buffers or other frequently-updated data.</p> <p><strong>Parameters:</strong></p> <ul> <li><code>device</code> - The device handle</li> <li><code>minimum_size</code> - Minimum allocation granularity</li> <li><code>pool_size</code> - Total pool size (must be power of 2)</li> </ul> <hr> <h2 id=per-frame>Per-Frame<a class=headerlink href=#per-frame title="Permanent link">&para;</a></h2> <h3 id=zest_updatedevice>zest_UpdateDevice<a class=headerlink href=#zest_updatedevice title="Permanent link">&para;</a></h3> <p>Updates device state each frame. Must be called once per frame before any <code>zest_BeginFrame</code> calls.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kt>int</span><span class=w> </span><span class=nf>zest_UpdateDevice</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>);</span>
</span></code></pre></div> <p>Performs maintenance tasks including: - Frees deferred resources that are no longer in use by the GPU - Releases staging buffers that have finished uploading - Increments the internal frame counter for the device</p> <p><strong>Returns:</strong> Number of resources freed this frame (useful for debugging memory issues)</p> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>running</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>SDL_PollEvent</span><span class=p>(</span><span class=o>&amp;</span><span class=n>event</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>event</span><span class=p>.</span><span class=n>type</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>SDL_QUIT</span><span class=p>)</span><span class=w> </span><span class=n>running</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=n>zest_UpdateDevice</span><span class=p>(</span><span class=n>device</span><span class=p>);</span><span class=w>  </span><span class=c1>// Must come before BeginFrame</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>zest_BeginFrame</span><span class=p>(</span><span class=n>context</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>        </span><span class=c1>// ... render ...</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>        </span><span class=n>zest_EndFrame</span><span class=p>(</span><span class=n>context</span><span class=p>);</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=p>}</span>
</span></code></pre></div> <hr> <h3 id=zest_waitforidledevice>zest_WaitForIdleDevice<a class=headerlink href=#zest_waitforidledevice title="Permanent link">&para;</a></h3> <p>Blocks until all GPU work is complete.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=kt>void</span><span class=w> </span><span class=nf>zest_WaitForIdleDevice</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>);</span>
</span></code></pre></div> <p>Waits for all queues to drain and the GPU to become idle. Use this before destroying resources that might still be in use, or when you need to guarantee all pending work is finished (e.g., before taking a screenshot of completed rendering).</p> <p>This is a heavy function that should not be used frequently, only when you absolutely must ensure that the GPU has finished all work.</p> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>// Ensure GPU is done before destroying resources</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=n>zest_WaitForIdleDevice</span><span class=p>(</span><span class=n>device</span><span class=p>);</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=n>zest_FreeTextureNow</span><span class=p>(</span><span class=n>my_texture</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=queries>Queries<a class=headerlink href=#queries title="Permanent link">&para;</a></h2> <h3 id=zest_getdevicepoolsize>zest_GetDevicePoolSize<a class=headerlink href=#zest_getdevicepoolsize title="Permanent link">&para;</a></h3> <p>Gets the configured pool size for a specific memory type.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=n>zest_buffer_pool_size_t</span><span class=w> </span><span class=nf>zest_GetDevicePoolSize</span><span class=p>(</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>,</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=n>zest_memory_property_flags</span><span class=w> </span><span class=n>property_flags</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=p>);</span>
</span></code></pre></div> <p>Returns information about the pool configuration for buffers with the given memory properties.</p> <p><strong>Returns:</strong> A struct containing the pool name, size, and minimum allocation size</p> <hr> <h3 id=zest_getdevicememorystats>zest_GetDeviceMemoryStats<a class=headerlink href=#zest_getdevicememorystats title="Permanent link">&para;</a></h3> <p>Gets current memory allocation statistics for the device.</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>zloc_allocation_stats_t</span><span class=w> </span><span class=nf>zest_GetDeviceMemoryStats</span><span class=p>(</span><span class=n>zest_device</span><span class=w> </span><span class=n>device</span><span class=p>);</span>
</span></code></pre></div> <p>Returns statistics from the TLSF allocator managing device memory, useful for debugging memory usage and detecting leaks.</p> <p><strong>Returns:</strong> Statistics including capacity, free space, blocks in use, and free block count</p> <p><strong>Example:</strong></p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=n>zloc_allocation_stats_t</span><span class=w> </span><span class=n>stats</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zest_GetDeviceMemoryStats</span><span class=p>(</span><span class=n>device</span><span class=p>);</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Device memory: %zu / %zu bytes used (%d blocks)</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=n>stats</span><span class=p>.</span><span class=n>capacity</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>stats</span><span class=p>.</span><span class=n>free</span><span class=p>,</span><span class=w> </span><span class=n>stats</span><span class=p>.</span><span class=n>capacity</span><span class=p>,</span><span class=w> </span><span class=n>stats</span><span class=p>.</span><span class=n>blocks_in_use</span><span class=p>);</span>
</span></code></pre></div> <hr> <h2 id=see-also>See Also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h2> <ul> <li><a href=../context/ >Context API</a></li> <li><a href=../../concepts/device-and-context/ >Device Concept</a></li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>